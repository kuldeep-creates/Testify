"use strict";(self.webpackChunktestify=self.webpackChunktestify||[]).push([[10],{372:(e,t,s)=>{s.d(t,{Ml:()=>o});var n=s(9379),i=s(6667),a=s(791);async function o(e){const t=(0,i.doc)(a.db,"tests",e),s=await(0,i.getDoc)(t);if(!s.exists())return null;const o=(await(0,i.getDocs)((0,i.collection)(t,"questions"))).docs.map(e=>{const t=e.data();return(0,n.A)({id:t.questionId||e.id},t)});return(0,n.A)((0,n.A)({id:s.id},s.data()),{},{questions:o})}},1978:(e,t,s)=>{s.d(t,{Qg:()=>i,Te:()=>n,cf:()=>a,fN:()=>o});const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(e.includes("exported")||e.includes("submitted")||e.includes("updated"))&&alert(e),t&&setTimeout(t,100)},i=function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;alert(e),t&&setTimeout(t,100)},a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t&&setTimeout(t,100)},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n=window.confirm(e);return n&&t?t():!n&&s&&s(),n}},4010:(e,t,s)=>{s.r(t),s.d(t,{default:()=>x});var n=s(9379),i=s(6667),a=s(5043),o=s(5352),r=s(980),l=s(791),d=s(372),c=s(5452),u=s(1978),m=s(9414),h=s(9530),g=s(579);const v=e=>({javascript:"// Write your JavaScript code here\nfunction solution() {\n    // Your code here\n    return result;\n}",python:"# Write your Python code here\ndef solution():\n    # Your code here\n    return result",java:"// Write your Java code here\npublic class Solution {\n    public static void main(String[] args) {\n        // Your code here\n    }\n}",cpp:"// Write your C++ code here\n#include <iostream>\nusing namespace std;\n\nint main() {\n    // Your code here\n    return 0;\n}",c:"// Write your C code here\n#include <stdio.h>\n\nint main() {\n    // Your code here\n    return 0;\n}",csharp:"// Write your C# code here\nusing System;\n\nclass Program {\n    static void Main() {\n        // Your code here\n    }\n}",php:"<?php\n// Write your PHP code here\nfunction solution() {\n    // Your code here\n    return $result;\n}\n?>",ruby:"# Write your Ruby code here\ndef solution\n    # Your code here\n    return result\nend",go:'// Write your Go code here\npackage main\n\nimport "fmt"\n\nfunc main() {\n    // Your code here\n}',html:"\x3c!-- Write your HTML code here --\x3e\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Solution</title>\n</head>\n<body>\n    \x3c!-- Your code here --\x3e\n</body>\n</html>",css:"/* Write your CSS code here */\n.container {\n    /* Your styles here */\n}",sql:"-- Write your SQL code here\nSELECT * FROM table_name\nWHERE condition;"}[e.toLowerCase()]||"// Write your code here\n"),p=e=>({javascript:{name:"JavaScript",color:"#f7df1e",icon:"\ud83d\udfe8"},python:{name:"Python",color:"#3776ab",icon:"\ud83d\udc0d"},java:{name:"Java",color:"#ed8b00",icon:"\u2615"},cpp:{name:"C++",color:"#00599c",icon:"\u26a1"},c:{name:"C",color:"#a8b9cc",icon:"\ud83d\udd27"},csharp:{name:"C#",color:"#239120",icon:"\ud83d\udd37"},php:{name:"PHP",color:"#777bb4",icon:"\ud83d\udc18"},ruby:{name:"Ruby",color:"#cc342d",icon:"\ud83d\udc8e"},go:{name:"Go",color:"#00add8",icon:"\ud83d\udc39"},html:{name:"HTML",color:"#e34f26",icon:"\ud83c\udf10"},css:{name:"CSS",color:"#1572b6",icon:"\ud83c\udfa8"},sql:{name:"SQL",color:"#336791",icon:"\ud83d\uddc3\ufe0f"}}[e.toLowerCase()]||{name:e.toUpperCase(),color:"#6b7280",icon:"\ud83d\udcc4"}),b=["javascript","python","java","cpp","c","csharp","php","ruby","go","html","css","sql"];const x=function(){var e;const{testId:t}=(0,o.g)(),s=(0,o.Zp)(),{user:x,userDoc:y}=(0,r.D)(),[f,w]=(0,a.useState)(!0),[j,N]=(0,a.useState)(""),[A,k]=(0,a.useState)(null),[C,S]=(0,a.useState)(0),[T,I]=(0,a.useState)(0),[q,E]=(0,a.useState)({}),[D,P]=(0,a.useState)(!1),[L,M]=(0,a.useState)(0),[Q,Y]=(0,a.useState)([]),[U,W]=(0,a.useState)(!1),[R,F]=(0,a.useState)(null),[z,O]=(0,a.useState)(""),[K,H]=(0,a.useState)(!1),[_,B]=(0,a.useState)(""),[J,V]=(0,a.useState)(!1),[G,X]=(0,a.useState)("checking"),[Z,$]=(0,a.useState)(!1),[ee,te]=(0,a.useState)(""),[se,ne]=(0,a.useState)("javascript"),ie=(0,a.useRef)(!1),ae=(0,a.useMemo)(()=>null!==A&&void 0!==A&&A.questions?[...A.questions].sort((e,t)=>(e.marks||e.marksPerQuestion||1)-(t.marks||t.marksPerQuestion||1)):[],[null===A||void 0===A?void 0:A.questions]),oe=(0,a.useMemo)(()=>(null===ae||void 0===ae?void 0:ae[C])||null,[ae,C]),re=(0,a.useCallback)(async()=>{try{if(c.A.debug("Fetching candidate name",{userId:null===x||void 0===x?void 0:x.uid}),null!==y&&void 0!==y&&y.name&&y.name.trim())return c.A.debug("Using name from userDoc"),y.name.trim();if(null!==x&&void 0!==x&&x.uid){const e=(0,i.doc)(l.db,"user",x.uid),t=await(0,i.getDoc)(e);if(t.exists()){const e=t.data();if(c.A.debug("Fetched user data from database"),e.name&&e.name.trim())return c.A.debug("Using name from database"),e.name.trim()}}const e=(null===y||void 0===y?void 0:y.email)||(null===x||void 0===x?void 0:x.email);if(e&&e.includes("@")){const t=e.split("@")[0];return c.A.debug("Using extracted name from email"),t}return c.A.warn("No name found, using Unknown"),"Unknown"}catch(e){c.A.error("Error fetching candidate name",null,e);const t=(null===y||void 0===y?void 0:y.email)||(null===x||void 0===x?void 0:x.email);return t&&t.includes("@")?t.split("@")[0]:"Unknown"}},[x,y]),le=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(c.A.info("Starting test submission",{isAutoSubmit:e,userId:null===x||void 0===x?void 0:x.uid,testId:t}),D)return void c.A.warn("Submission already in progress");const a=(null===A||void 0===A?void 0:A.allowMultipleSubmissions)||!1;if(!e){let e="Submit your test?";e=a?"Submit your test? You can submit again later if multiple submissions are enabled.":"Submit your test? This cannot be undone.";if(!(0,u.fN)(e))return void c.A.info("User cancelled submission")}P(!0),c.A.info("Starting submission process");try{if(null===x||void 0===x||!x.uid)throw c.A.error("No user UID available"),new Error("User not authenticated");if(!t)throw c.A.error("No test ID available"),new Error("Missing test ID");const a=(null===A||void 0===A?void 0:A.allowMultipleSubmissions)||!1,o=(0,i.query)((0,i.collection)(l.db,"results"),(0,i.where)("candidateId","==",x.uid),(0,i.where)("testId","==",t)),r=await(0,i.getDocs)(o);c.A.debug("Checking existing submissions",{existingCount:r.size,allowMultiple:a}),c.A.debug("Calculating total marks from test data");const d=(ae||[]).reduce((e,t)=>{const s=t.marks||t.marksPerQuestion||1;return c.A.debug("Question ".concat(t.id," marks: ").concat(s)),e+Number(s)},0);c.A.debug("Calculated total marks",{totalMarks:d});const m=await re();c.A.debug("Using candidate name for submission",{candidateName:m});const h={candidateId:x.uid,candidateName:m,testId:t,testTitle:(null===A||void 0===A?void 0:A.title)||"Test",title:(null===A||void 0===A?void 0:A.title)||"Test",answers:q,score:0,status:e?"auto-submitted":"submitted",submittedAt:new Date,startedAt:R||new Date,totalQuestions:(null===ae||void 0===ae?void 0:ae.length)||0,answeredQuestions:Object.values(q).filter(e=>e&&""!==String(e).trim()).length,totalMarks:d};if(c.A.debug("Submitting test",{hasAnswers:!!q,answerCount:Object.keys(q).length}),a&&r.size>=3)throw new Error("Maximum attempts reached. You have already submitted this test 3 times.");if(r.size>0&&a){const e=r.docs[r.docs.length-1];await(0,i.updateDoc)(e.ref,(0,n.A)((0,n.A)({},h),{},{submissionNumber:r.size+1,previousSubmissionId:e.id,updatedAt:new Date})),c.A.info("Updated existing submission",{submissionId:e.id}),(0,u.Te)("Test re-submitted successfully! (Attempt #".concat(r.size+1,")"))}else{if(r.size>0&&!a)throw new Error("You have already submitted this test. Multiple submissions are not allowed.");{const e=await(0,i.addDoc)((0,i.collection)(l.db,"results"),(0,n.A)((0,n.A)({},h),{},{submissionNumber:1}));c.A.info("Test submitted successfully",{submissionId:e.id}),(0,u.Te)("Test submitted successfully!")}}s("/dashboard")}catch(r){var o;c.A.error("Test submission failed",{code:r.code,message:r.message},r);let e="Could not submit test. ";"unavailable"===r.code?e+="Check your internet connection.":"permission-denied"===r.code?e+="Permission denied. Check Firestore rules.":"unauthenticated"===r.code?e+="Please log in again.":"failed-precondition"===r.code?e+="Database configuration issue.":null!==(o=r.message)&&void 0!==o&&o.includes("fetch")?e+="Network error. Check connection.":e+="".concat(r.message||"Unknown error","."),(0,u.Qg)(e,r)}finally{P(!1),c.A.info("Submission process completed")}},[D,x,t,q,A,s,R,re,ae]),de=(0,a.useCallback)(async e=>{if(!D&&!ie.current&&null!==x&&void 0!==x&&x.uid&&t){ie.current=!0,P(!0);try{const n=await re(),a=(ae||[]).reduce((e,t)=>{const s=t.marks||t.marksPerQuestion||1;return e+Number(s)},0),o={candidateId:x.uid,candidateName:n,testId:t,testTitle:(null===A||void 0===A?void 0:A.title)||"Test",title:(null===A||void 0===A?void 0:A.title)||"Test",answers:q,score:0,status:"auto-submitted",submittedAt:new Date,startedAt:R||new Date,totalQuestions:(null===ae||void 0===ae?void 0:ae.length)||0,answeredQuestions:Object.values(q).filter(e=>e&&""!==String(e).trim()).length,totalMarks:a,violation:e,tabSwitches:L,alertCount:Q.length};await(0,i.addDoc)((0,i.collection)(l.db,"results"),o),await(0,i.addDoc)((0,i.collection)(l.db,"adminLogs"),{action:"auto-submit",candidateId:x.uid,testId:t,reason:e,tabSwitches:L,timestamp:new Date,evidence:{alerts:Q.length,tabSwitches:L,answers:Object.keys(q).length}}),s("/dashboard")}catch(n){c.A.error("Auto-submit error",null,n),s("/dashboard")}finally{P(!1)}}},[D,x,t,q,A,L,Q,s,R,re,ae]),ce=async()=>{if(z===A.password){H(!1),B(""),V(!0);try{await(0,i.addDoc)((0,i.collection)(l.db,"monitoring"),{candidateId:x.uid,testId:t,type:"password_verified",timestamp:(0,i.serverTimestamp)(),description:"Password verified successfully",severity:"info",metadata:{testTitle:A.title,userAgent:navigator.userAgent,passwordProtected:!0}})}catch(e){c.A.error("Error logging password verification",null,e)}}else{B("Incorrect password. Please try again.");try{await(0,i.addDoc)((0,i.collection)(l.db,"monitoring"),{candidateId:x.uid,testId:t,type:"password_failed",timestamp:(0,i.serverTimestamp)(),description:"Failed password attempt",severity:"medium",metadata:{attemptedPassword:z.slice(0,3)+"***",userAgent:navigator.userAgent}})}catch(e){c.A.error("Error logging password failure",null,e)}}},ue=async()=>{try{const s=A.allowMultipleSubmissions||!1,n=(0,i.query)((0,i.collection)(l.db,"results"),(0,i.where)("candidateId","==",x.uid),(0,i.where)("testId","==",t)),a=(await(0,i.getDocs)(n)).size;if(c.A.debug("StartTest submission check",{submissionCount:a,allowMultiple:s,testId:t,shouldBlock:a>=3&&s,attemptNumber:a+1}),a>0&&!s)return te("This test does not allow multiple submissions. You have already submitted this test ".concat(a," time").concat(a>1?"s":"",". Please contact your branch head if you need to retake this test.")),$(!0),void V(!1);if(a>=3&&s)return te("You have reached the maximum number of attempts (3) for this test. You have already submitted this test ".concat(a," times. Please contact your branch head if you need additional attempts.")),$(!0),void V(!1);V(!1);const o=(e=>{if(!e)return 30;const t=e.match(/(\d+)\s*min/),s=e.match(/(\d+)h/);let n=0;if(s&&(n+=60*parseInt(s[1])),t&&(n+=parseInt(t[1])),!s&&!t){const t=e.match(/(\d+)/);t&&(n=parseInt(t[1]))}return n||30})(A.duration);I(60*o),F(new Date);try{await(0,i.addDoc)((0,i.collection)(l.db,"monitoring"),{candidateId:x.uid,testId:t,type:"session_start",timestamp:(0,i.serverTimestamp)(),description:"Test session started",severity:"info",metadata:{testTitle:A.title,duration:A.duration,totalQuestions:(null===ae||void 0===ae?void 0:ae.length)||0,userAgent:navigator.userAgent,startTime:(new Date).toISOString(),passwordProtected:!!A.password,attemptNumber:a+1}}),c.A.info("Test session started successfully")}catch(e){c.A.error("Error logging session start",null,e)}}catch(e){c.A.error("Error starting test",null,e),N("Error starting test. Please try again.")}};(0,a.useEffect)(()=>{!async function(){if(x)try{var e;const s=await(0,d.Ml)(t);if(!s)return N("Test not found"),void w(!1);c.A.debug("Test data loaded",{hasQuestions:!!s.questions,questionCount:(null===(e=s.questions)||void 0===e?void 0:e.length)||0}),k(s),s.password&&""!==s.password.trim()?H(!0):V(!0)}catch(n){c.A.error("Error fetching test data",null,n),N("Error loading test. Please try again.")}finally{w(!1)}else s("/")}()},[t,x,s]),(0,a.useEffect)(()=>{if(T<=0||!A)return;const e=setInterval(()=>{I(e=>e<=1?(D||ie.current||(c.A.info("Time up! Auto-submitting test"),ie.current=!0,setTimeout(()=>le(!0),0)),0):e-1)},1e3);return()=>clearInterval(e)},[T,A,D,le]),(0,a.useEffect)(()=>{async function e(){try{const e=await(async()=>{try{return(await fetch("/favicon.ico",{method:"HEAD",cache:"no-cache"})).ok}catch(e){return navigator.onLine}})();X(e?"online":"offline")}catch(e){X("offline")}}e();const t=setInterval(e,3e4);return()=>clearInterval(t)},[]),(0,a.useEffect)(()=>{if(!A||D)return;const e=()=>{document.hidden&&(async e=>{if(c.A.debug("Tab switch event triggered",{eventType:e,userId:null===x||void 0===x?void 0:x.uid,testId:t}),x&&t)try{await(0,i.addDoc)((0,i.collection)(l.db,"monitoring"),{candidateId:x.uid,testId:t,type:"tab_switch",timestamp:(0,i.serverTimestamp)(),description:"User ".concat("hidden"===e?"switched away from":"returned to"," test tab"),severity:"high",metadata:{eventType:e,userAgent:navigator.userAgent,currentQuestion:C+1}}),c.A.debug("Tab switch logged successfully"),M(e=>{const t=e+1;return Y(e=>[...e,{msg:"Tab switch detected (".concat(t," times). Stay on test page!"),time:new Date}]),W(!0),t>=3&&(c.A.warn("Auto-submitting due to tab switch violations"),setTimeout(()=>de("excessive-tab-switching"),1e3)),t})}catch(s){c.A.error("Error logging tab switch",null,s)}else c.A.warn("Tab switch: Missing user or testId")})("hidden")},s=e=>(e.preventDefault(),e.returnValue="Are you sure you want to leave the test? Your progress may be lost.","Are you sure you want to leave the test? Your progress may be lost.");return document.addEventListener("visibilitychange",e),window.addEventListener("beforeunload",s),()=>{document.removeEventListener("visibilitychange",e),window.removeEventListener("beforeunload",s)}},[A,D,x,t,C,de]);const me=(0,a.useCallback)(async(e,s)=>{if(x&&t&&e)try{const n=null===ae||void 0===ae?void 0:ae.find(t=>t.id===e);let a="Question text not available";if(n)a=n.questionText||n.question||n.text||"Question text not available",c.A.debug("Found question for paste event",{questionId:e});else{c.A.warn("Question not found for paste event",{questionId:e,availableQuestions:null===ae||void 0===ae?void 0:ae.map(e=>e.id)});const t=null===ae||void 0===ae?void 0:ae[C];t&&(a=t.questionText||t.question||t.text||"Question text not available",c.A.debug("Using current question text instead"))}await(0,i.addDoc)((0,i.collection)(l.db,"monitoring"),{candidateId:x.uid,testId:t,type:"paste",timestamp:(0,i.serverTimestamp)(),description:"Content pasted in question ".concat(e),severity:"high",questionId:e,questionText:a,content:s.slice(0,200),metadata:{contentLength:s.length,questionId:e,userAgent:navigator.userAgent}}),await(0,i.addDoc)((0,i.collection)(l.db,"pasteLogs"),{candidateId:x.uid,testId:t,questionId:e,pasted:s.slice(0,100),timestamp:(0,i.serverTimestamp)()}),Y(t=>[...t,{msg:"Paste detected in question ".concat(e,"."),time:new Date}]),W(!0)}catch(n){c.A.error("Error logging paste event",null,n)}},[x,t,ae,C]),he=(0,a.useCallback)(async function(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"low",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(c.A.debug("Attempting to log monitoring event",{type:e,description:s,severity:a,userId:null===x||void 0===x?void 0:x.uid,testId:t}),x&&t)try{const r=null===ae||void 0===ae?void 0:ae[C];let d=null;r?(d=r.questionText||r.question||r.text,c.A.debug("Found question text for monitoring event",{hasText:!!d})):c.A.debug("No current question found for monitoring event");const u=(0,n.A)((0,n.A)((0,n.A)({candidateId:x.uid,testId:t,type:e,timestamp:(0,i.serverTimestamp)(),description:s,severity:a},o),d&&{questionText:d}),{},{metadata:(0,n.A)({userAgent:navigator.userAgent,currentQuestion:C+1,totalQuestions:(null===ae||void 0===ae?void 0:ae.length)||0,timeRemaining:T},o.metadata)});c.A.debug("Monitoring event data prepared",{type:e,severity:a});const m=await(0,i.addDoc)((0,i.collection)(l.db,"monitoring"),u);c.A.debug("Monitoring event logged successfully",{eventId:m.id})}catch(r){console.error("\u274c MONITORING: Error logging ".concat(e," event:"),r),console.error("Error details:",{code:r.code,message:r.message,stack:r.stack})}else c.A.warn("Monitoring: Missing user or testId",{userId:null===x||void 0===x?void 0:x.uid,testId:t})},[x,t,C,ae,T]),ge=(0,a.useCallback)(async()=>{if(c.A.debug("Copy event triggered"),x&&t)try{const e=window.getSelection().toString();c.A.debug("Copy event: Text selected",{textLength:e.length}),e.length>0?(c.A.debug("Logging copy event"),await he("copy",'User copied text: "'.concat(e.slice(0,50)).concat(e.length>50?"...":"",'"'),"medium",{content:e.slice(0,200),questionId:null===oe||void 0===oe?void 0:oe.id,metadata:{selectionLength:e.length,questionType:null===oe||void 0===oe?void 0:oe.questionType}}),Y(e=>[...e,{msg:"Copy action detected.",time:new Date}]),W(!0),c.A.debug("Copy event logged successfully")):c.A.debug("Copy event: No text selected, skipping log")}catch(e){c.A.error("Error handling copy event",null,e)}else c.A.warn("Copy event: Missing user or testId",{userId:null===x||void 0===x?void 0:x.uid,testId:t})},[x,t,oe,he]),ve=(0,a.useCallback)(async e=>{if(x&&t){e.preventDefault();try{await he("right_click","User attempted to right-click","low",{questionId:null===oe||void 0===oe?void 0:oe.id,metadata:{x:e.clientX,y:e.clientY,target:e.target.tagName}}),Y(e=>[...e,{msg:"Right-click detected.",time:new Date}]),W(!0)}catch(s){c.A.error("Error handling right-click",null,s)}}},[x,t,oe,he]),pe=(0,a.useCallback)(async e=>{if(!x||!t)return;const s=[];e.ctrlKey&&s.push("Control"),e.shiftKey&&s.push("Shift"),e.altKey&&s.push("Alt"),e.key&&!["Control","Shift","Alt"].includes(e.key)&&s.push(e.key.toLowerCase());const n=[{keys:["Control","c"],name:"Ctrl+C (Copy)"},{keys:["Control","v"],name:"Ctrl+V (Paste)"},{keys:["Control","a"],name:"Ctrl+A (Select All)"},{keys:["Control","f"],name:"Ctrl+F (Find)"},{keys:["Control","h"],name:"Ctrl+H (History)"},{keys:["Control","j"],name:"Ctrl+J (Downloads)"},{keys:["Control","shift","i"],name:"Ctrl+Shift+I (DevTools)"},{keys:["F12"],name:"F12 (DevTools)"},{keys:["Control","u"],name:"Ctrl+U (View Source)"},{keys:["Control","shift","j"],name:"Ctrl+Shift+J (Console)"},{keys:["Control","Tab"],name:"Ctrl+Tab (Switch Tab)"},{keys:["Control","shift","Tab"],name:"Ctrl+Shift+Tab (Switch Tab)"},{keys:["Control","t"],name:"Ctrl+T (New Tab)"},{keys:["Control","w"],name:"Ctrl+W (Close Tab)"},{keys:["Control","n"],name:"Ctrl+N (New Window)"},{keys:["Alt","Tab"],name:"Alt+Tab (Switch Window)"},{keys:["Alt","F4"],name:"Alt+F4 (Close Window)"},{keys:["Control","r"],name:"Ctrl+R (Refresh)"},{keys:["F5"],name:"F5 (Refresh)"},{keys:["Control","shift","r"],name:"Ctrl+Shift+R (Hard Refresh)"}].find(e=>e.keys.length===s.length&&e.keys.every(e=>s.includes(e.toLowerCase())));if(n){e.preventDefault();try{await he("keyboard_shortcut","Suspicious keyboard shortcut used: ".concat(n.name),"high",{shortcut:n.name,keys:s,questionId:null===oe||void 0===oe?void 0:oe.id,metadata:{keyCode:e.keyCode,prevented:!0}}),Y(e=>[...e,{msg:"Keyboard shortcut blocked: ".concat(n.name),time:new Date}]),W(!0)}catch(i){c.A.error("Error logging keyboard shortcut",null,i)}}},[x,t,oe,he]);return(0,a.useEffect)(()=>{if(console.log("\ud83d\udd0d EVENT LISTENERS: Setting up monitoring listeners",{hasTestData:!!A,isSubmitting:D,user:null===x||void 0===x?void 0:x.uid,testId:t,showInstructions:J}),A&&!D&&!J)return c.A.debug("Adding event listeners"),document.addEventListener("copy",ge),document.addEventListener("contextmenu",ve),document.addEventListener("keydown",pe),c.A.debug("All monitoring event listeners added"),()=>{c.A.debug("Removing event listeners"),document.removeEventListener("copy",ge),document.removeEventListener("contextmenu",ve),document.removeEventListener("keydown",pe),c.A.debug("All monitoring event listeners removed")};c.A.debug("Skipping event listener setup - conditions not met")},[A,D,J,ge,ve,pe,t,null===x||void 0===x?void 0:x.uid]),(0,a.useEffect)(()=>{const e=e=>{if(D||!ae||J)return;const t=e.target;"INPUT"===t.tagName||"TEXTAREA"===t.tagName||"true"===t.contentEditable||("ArrowRight"===e.key&&C<ae.length-1&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?(e.preventDefault(),S(e=>e+1)):"ArrowLeft"===e.key&&C>0&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&(e.preventDefault(),S(e=>e-1)))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[C,ae,D,J]),Z?(0,g.jsx)(m.A,{message:ee}):K?(0,g.jsx)("div",{className:"password-prompt-overlay",children:(0,g.jsxs)("div",{className:"password-prompt",children:[(0,g.jsx)("h2",{children:"Enter Test Password"}),(0,g.jsx)("p",{children:"This test is password protected. Please enter the password to continue."}),(0,g.jsx)("input",{type:"password",value:z,onChange:e=>O(e.target.value),placeholder:"Enter password",className:"password-input",onKeyPress:e=>"Enter"===e.key&&ce()}),_&&(0,g.jsx)("div",{className:"error-message",children:_}),(0,g.jsx)("button",{onClick:ce,className:"btn btn-primary",disabled:!z.trim(),children:"Enter In Test \ud83d\ude80"})]})}):J?(0,g.jsx)("div",{className:"instructions-overlay",children:(0,g.jsxs)("div",{className:"instructions-container",children:[(0,g.jsxs)("div",{className:"instructions-header",children:[(0,g.jsx)("h1",{children:A.title}),(0,g.jsx)("div",{className:"test-info"})]}),(0,g.jsxs)("div",{className:"instructions-content",children:[(0,g.jsxs)("div",{className:"instruction-card",children:[(0,g.jsx)("div",{className:"card-header",children:(0,g.jsx)("h3",{children:"\ud83d\udcdd Test Details"})}),(0,g.jsx)("div",{className:"card-body",children:(0,g.jsxs)("div",{className:"test-details",children:[(0,g.jsxs)("div",{className:"detail-item",children:[(0,g.jsx)("span",{className:"detail-label",children:"Duration:"}),(0,g.jsx)("span",{className:"detail-value",children:A.duration})]}),(0,g.jsxs)("div",{className:"detail-item",children:[(0,g.jsx)("span",{className:"detail-label",children:"Total Questions:"}),(0,g.jsx)("span",{className:"detail-value",children:(null===ae||void 0===ae?void 0:ae.length)||0})]}),(0,g.jsxs)("div",{className:"detail-item",children:[(0,g.jsx)("span",{className:"detail-label",children:"Total Marks:"}),(0,g.jsx)("span",{className:"detail-value",children:(null===ae||void 0===ae?void 0:ae.reduce((e,t)=>e+(t.marks||1),0))||0})]})]})})]}),(0,g.jsxs)("div",{className:"instruction-card rules-card",children:[(0,g.jsx)("div",{className:"card-header",children:(0,g.jsx)("h3",{children:"\u26a0\ufe0f Important Rules"})}),(0,g.jsx)("div",{className:"card-body",children:(0,g.jsxs)("ul",{className:"rules-list",children:[(0,g.jsxs)("li",{children:["\ud83d\udeab ",(0,g.jsx)("strong",{children:"Do not switch tabs,"})," after tab switch test will be auto-submitted"]}),(0,g.jsxs)("li",{children:["\ud83d\udeab ",(0,g.jsx)("strong",{children:"Do not copy/paste"})," All copy-paste activities are logged"]}),(0,g.jsxs)("li",{children:["\ud83d\udeab ",(0,g.jsx)("strong",{children:"Do not right-click"})," or use keyboard shortcuts"]}),(0,g.jsxs)("li",{children:["\u23f0 ",(0,g.jsx)("strong",{children:"Submit before time runs out"})," - test will auto-submit when time expires"]}),(0,g.jsxs)("li",{children:["\ud83d\udcbe ",(0,g.jsx)("strong",{children:"Your answers are saved automatically"})," as you type"]}),(0,g.jsxs)("li",{children:["\ud83d\udd04 ",(0,g.jsx)("strong",{children:"You can navigate between questions"})," using the question numbers"]})]})})]}),(0,g.jsxs)("div",{className:"instruction-card tips-card",children:[(0,g.jsx)("div",{className:"card-header",children:(0,g.jsx)("h3",{children:"\ud83d\udca1 Tips for Success"})}),(0,g.jsx)("div",{className:"card-body",children:(0,g.jsxs)("ul",{className:"tips-list",children:[(0,g.jsx)("li",{children:"\u2705 Read each question carefully before answering"}),(0,g.jsx)("li",{children:"\u2705 Manage your time wisely across all questions"}),(0,g.jsx)("li",{children:"\u2705 Use the question navigation to review your answers"}),(0,g.jsx)("li",{children:"\u2705 Ensure stable internet connection throughout the test"}),(0,g.jsx)("li",{children:"\u2705 Submit your test before the timer expires"})]})})]})]}),(0,g.jsxs)("div",{className:"instructions-footer",children:[(0,g.jsxs)("div",{className:"footer-warning",children:[(0,g.jsx)("span",{className:"warning-icon",children:"\u26a0\ufe0f"}),(0,g.jsx)("p",{children:'By clicking "Start Test", you agree to follow all test rules and understand that violations will be monitored and may result in test termination.'})]}),(0,g.jsx)("button",{onClick:ue,className:"start-test-btn",children:"\ud83d\ude80 Start Test"})]})]})}):f?(0,g.jsx)(h.A,{message:"Loading test",subtext:"Preparing your test environment"}):j?(0,g.jsx)("div",{className:"test-container",children:(0,g.jsxs)("div",{className:"test-card",children:["Error: ",j]})}):A?x?(0,g.jsx)("div",{className:"test-runner",children:(0,g.jsxs)("div",{className:"test-container",children:[(0,g.jsxs)("div",{className:"test-header sticky",children:[(0,g.jsx)("button",{className:"btn btn-outline",onClick:()=>C>0&&S(C-1),disabled:0===C,children:"\u2190 Previous"}),(0,g.jsxs)("div",{className:"text-lg font-medium text-primary",children:["Question ",C+1," of ",ae.length]}),(0,g.jsxs)("div",{className:"timer ".concat(T<300?"danger":T<600?"warning":""),children:["Time: ",(xe=T,"".concat(String(Math.floor(xe/60)).padStart(2,"0"),":").concat(String(xe%60).padStart(2,"0")))]}),(0,g.jsx)("div",{className:"connection-status ".concat(G),children:"online"===G?"\ud83d\udfe2 Online":"offline"===G?"\ud83d\udd34 Offline":"\ud83d\udfe1 Checking..."}),!1,(0,g.jsx)("button",{className:"btn btn-primary",onClick:e=>{e.preventDefault(),e.stopPropagation(),c.A.debug("Submit button clicked"),le()},disabled:D,style:{cursor:D?"not-allowed":"pointer",opacity:D?.6:1,pointerEvents:"auto"},children:D?"Submitting...":"Submit Test"})]}),U&&Q.length>0&&(0,g.jsx)("div",{className:"warning-banner",children:(0,g.jsxs)("div",{className:"warning-content",children:[(0,g.jsx)("div",{className:"warning-icon",children:"\u26a0\ufe0f"}),(0,g.jsxs)("div",{className:"warning-text",children:[(0,g.jsx)("strong",{children:"Warning:"})," ",Q[Q.length-1].msg]}),(0,g.jsx)("button",{className:"warning-close",onClick:()=>W(!1),children:"\xd7"})]})}),(0,g.jsx)("div",{className:"test-progress",children:(0,g.jsx)("div",{className:"test-progress-bar",style:{width:"".concat(Math.round((C+1)/(ae.length||1)*100),"%")}})}),(0,g.jsx)("div",{className:"security-notice",style:{background:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"0.5rem",padding:"0.75rem 1rem",margin:"1rem 0",fontSize:"0.875rem",color:"#92400e"},children:(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,g.jsx)("span",{children:"\ud83d\udd12"}),(0,g.jsx)("strong",{children:"Security Notice:"})," Tab switching, keyboard shortcuts, and right-clicking are monitored and restricted during this test. Please stay on this page to avoid violations."]}),(0,g.jsxs)("div",{style:{fontSize:"0.75rem",color:"#78350f"},children:["Tab Switches: ",L]})]})}),(0,g.jsx)("div",{className:"test-content",children:oe?(0,g.jsx)("div",{className:"card",children:(0,g.jsxs)("div",{className:"card-body",children:[(0,g.jsxs)("div",{className:"question-content",children:[(0,g.jsx)("div",{className:"text-xl font-semibold mb-6 text-primary",children:oe.questionText||oe.question||oe.text||"No question text"}),oe.imageUrl&&oe.imageUrl.trim()&&(0,g.jsx)("div",{className:"question-image",children:(0,g.jsx)("img",{src:oe.imageUrl,alt:"Question illustration",className:"question-img",onError:e=>{console.error("Failed to load image:",oe.imageUrl),e.target.style.display="none"}})})]}),"mcq"===oe.questionType&&(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"space-y-3 mb-6",children:null===(e=oe.options)||void 0===e?void 0:e.map((e,t)=>(0,g.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,g.jsx)("input",{type:"radio",name:"q-".concat(oe.id),value:e,checked:q[oe.id]===e,onChange:e=>E(t=>(0,n.A)((0,n.A)({},t),{},{[oe.id]:e.target.value})),className:"w-4 h-4 text-primary"}),(0,g.jsx)("span",{className:"text-base",children:e})]},t))}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Notes (Optional)"}),(0,g.jsx)("textarea",{className:"textarea",placeholder:"Add notes...",rows:4,value:q["".concat(oe.id,"_notes")]||"",onChange:e=>E(t=>(0,n.A)((0,n.A)({},t),{},{["".concat(oe.id,"_notes")]:e.target.value})),onPaste:e=>me("".concat(oe.id,"_notes"),e.clipboardData.getData("text"))})]})]}),"long"===oe.questionType&&(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Your Answer"}),(0,g.jsx)("textarea",{className:"textarea",placeholder:"Type your answer...",rows:8,value:q[oe.id]||"",onChange:e=>E(t=>(0,n.A)((0,n.A)({},t),{},{[oe.id]:e.target.value})),onPaste:e=>me(oe.id,e.clipboardData.getData("text"))})]}),"code"===oe.questionType&&(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{className:"code-question-header",children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Your Code"}),(0,g.jsxs)("div",{className:"language-selector-container",children:[(0,g.jsx)("label",{className:"language-selector-label",children:"Language:"}),(0,g.jsx)("select",{className:"language-selector",value:se,onChange:e=>{const t=e.target.value;ne(t);const s=q[oe.id]||"";s.trim()&&s!==v(se)||E(e=>(0,n.A)((0,n.A)({},e),{},{[oe.id]:v(t)}))},children:b.map(e=>{const t=p(e);return(0,g.jsxs)("option",{value:e,children:[t.icon," ",t.name]},e)})})]})]}),(0,g.jsxs)("div",{className:"code-editor-container",children:[(0,g.jsxs)("div",{className:"code-editor-header",children:[(0,g.jsx)("div",{className:"code-editor-tabs",children:(0,g.jsxs)("span",{className:"code-tab active",children:[(0,g.jsx)("span",{className:"code-icon",children:p(se).icon}),"solution.",(be=se,{javascript:"js",python:"py",java:"java",cpp:"cpp",c:"c",csharp:"cs",php:"php",ruby:"rb",go:"go",rust:"rs",typescript:"ts",html:"html",css:"css",sql:"sql",bash:"sh",powershell:"ps1"}[be.toLowerCase()]||"txt")]})}),(0,g.jsx)("div",{className:"code-editor-actions",children:(0,g.jsx)("span",{className:"language-badge",style:{backgroundColor:"".concat(p(se).color,"20"),color:p(se).color,borderColor:"".concat(p(se).color,"40")},children:p(se).name.toUpperCase()})})]}),(0,g.jsxs)("div",{className:"code-editor-wrapper",children:[(0,g.jsx)("div",{className:"line-numbers",children:Array.from({length:Math.max(12,(q[oe.id]||v(se)).split("\n").length)},(e,t)=>(0,g.jsx)("div",{className:"line-number",children:t+1},t+1))}),(0,g.jsx)("textarea",{className:"code-textarea",placeholder:v(se),rows:12,value:q[oe.id]||v(se),onChange:e=>{E(t=>(0,n.A)((0,n.A)({},t),{},{[oe.id]:e.target.value}))},onPaste:e=>me(oe.id,e.clipboardData.getData("text")),onScroll:e=>{const t=e.target.parentElement.querySelector(".line-numbers");t&&(t.scrollTop=e.target.scrollTop)},onFocus:e=>{(q[oe.id]||v(se))===v(se)&&e.target.select()},spellCheck:!1})]}),(0,g.jsx)("div",{className:"code-editor-footer",children:(0,g.jsxs)("div",{className:"code-stats",children:["Lines: ",(q[oe.id]||"").split("\n").length," | Characters: ",(q[oe.id]||"").length]})})]})]})]})}):(0,g.jsx)("div",{className:"card",children:(0,g.jsx)("div",{className:"card-body text-center",children:(0,g.jsx)("div",{className:"text-lg text-secondary",children:"No questions available."})})})}),(0,g.jsxs)("div",{className:"test-footer",children:[(0,g.jsx)("div",{className:"question-nav",children:ae.map((e,t)=>(0,g.jsx)("button",{className:"question-nav-btn ".concat(t===C?"active":""," ").concat(q[e.id]?"answered":""),onClick:()=>!D&&S(t),disabled:D,title:"Question ".concat(t+1," (").concat(e.marks||1," marks)").concat(q[e.id]?" - Answered":""),children:t+1},t))}),(0,g.jsxs)("div",{className:"flex gap-2",children:[(0,g.jsx)("button",{className:"btn btn-outline",onClick:()=>C<ae.length-1&&S(C+1),disabled:C>=ae.length-1||D,children:C>=ae.length-1?"Last Question":"Next \u2192"}),(0,g.jsx)("button",{className:"btn btn-secondary",onClick:()=>(0,u.cf)("Progress is auto-saved!"),children:"Save Progress"})]})]})]})}):(0,g.jsx)("div",{className:"test-container",children:(0,g.jsx)("div",{className:"test-card",children:"Please log in"})}):(0,g.jsx)("div",{className:"test-container",children:(0,g.jsx)("div",{className:"test-card",children:"Test not found"})});var be,xe}},7951:()=>{},9414:(e,t,s)=>{s.d(t,{A:()=>i});var n=s(579);const i=function(e){let{message:t,onClose:s}=e;return(0,n.jsx)("div",{className:"blocked-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,n.jsxs)("div",{className:"blocked-card",style:{backgroundColor:"white",borderRadius:"12px",padding:"32px",maxWidth:"500px",margin:"20px",textAlign:"center",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.15)",border:"2px solid #ef4444"},children:[(0,n.jsx)("div",{style:{fontSize:"64px",color:"#ef4444",marginBottom:"16px"},children:"\ud83d\udeab"}),(0,n.jsx)("h2",{style:{color:"#ef4444",marginBottom:"16px",fontSize:"24px",fontWeight:"bold"},children:"Multiple Submissions Not Allowed"}),(0,n.jsx)("p",{style:{color:"#6b7280",marginBottom:"24px",lineHeight:"1.6",fontSize:"16px"},children:t||"This test does not allow multiple submissions. You have already submitted this test. Please contact your domain head if you need to retake this test."}),(0,n.jsxs)("div",{style:{backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"12px",marginBottom:"24px"},children:[(0,n.jsx)("div",{style:{fontSize:"14px",color:"#dc2626",fontWeight:"500"},children:"\ud83d\udccb Contact Information"}),(0,n.jsx)("div",{style:{fontSize:"14px",color:"#7f1d1d",marginTop:"4px"},children:"Please reach out to your domain head or administrator for assistance with test retakes or additional attempts."})]}),(0,n.jsx)("div",{style:{display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"},children:s&&(0,n.jsx)("button",{onClick:s,className:"btn btn-outline",style:{backgroundColor:"transparent",color:"#6b7280",padding:"12px 24px",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"500"},children:"Close"})})]})})}},9530:(e,t,s)=>{s.d(t,{A:()=>i});s(5043),s(7951);var n=s(579);const i=function(e){let{message:t="Loading",subtext:s="Please wait...",size:i="normal",variant:a="dashboard"}=e;return"inline"===a?(0,n.jsxs)("div",{className:"inline-loading ".concat(i),children:[(0,n.jsxs)("div",{className:"inline-spinner",children:[(0,n.jsx)("div",{className:"spinner-ring"}),(0,n.jsx)("div",{className:"spinner-ring"}),(0,n.jsx)("div",{className:"spinner-ring"})]}),(0,n.jsx)("span",{className:"inline-text",children:t})]}):(0,n.jsx)("div",{className:"dashboard-loading",children:(0,n.jsxs)("div",{className:"loading-content",children:[(0,n.jsx)("div",{className:"loading-logo",children:"TESTIFY"}),(0,n.jsxs)("div",{className:"loading-spinner",children:[(0,n.jsx)("div",{className:"spinner-ring"}),(0,n.jsx)("div",{className:"spinner-ring"}),(0,n.jsx)("div",{className:"spinner-ring"}),(0,n.jsx)("div",{className:"spinner-ring"})]}),(0,n.jsxs)("div",{className:"loading-text",children:[t,(0,n.jsxs)("div",{className:"loading-dots",children:[(0,n.jsx)("div",{className:"loading-dot"}),(0,n.jsx)("div",{className:"loading-dot"}),(0,n.jsx)("div",{className:"loading-dot"})]})]}),(0,n.jsx)("div",{className:"loading-subtext",children:s})]})})}}}]);
//# sourceMappingURL=10.6cc907d3.chunk.js.map