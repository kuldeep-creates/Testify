"use strict";(self.webpackChunktestify=self.webpackChunktestify||[]).push([[350],{4350:(e,a,i)=>{i.r(a),i.d(a,{default:()=>t});var n=i(9379),l=i(6667),o=i(5043),s=i(5352),d=i(980),r=i(791),c=i(579);const t=function(){const e=(0,s.Zp)(),{user:a,userDoc:i,loading:t}=(0,d.D)(),[m,u]=(0,o.useState)(!1),[h,v]=(0,o.useState)(""),[p,g]=(0,o.useState)(""),[x,b]=(0,o.useState)({name:"",email:"",mobile:"",year:"",branch:"",domain:""});(0,o.useEffect)(()=>{if(!t){if(!a)return void e("/login");b({name:(null===i||void 0===i?void 0:i.name)||(null===a||void 0===a?void 0:a.displayName)||"",email:(null===i||void 0===i?void 0:i.email)||(null===a||void 0===a?void 0:a.email)||"",mobile:(null===i||void 0===i?void 0:i.mobile)||(null===i||void 0===i?void 0:i.phone)||"",year:(null===i||void 0===i?void 0:i.year)||"",branch:(null===i||void 0===i?void 0:i.branch)||"",domain:(null===i||void 0===i?void 0:i.domain)||""})}},[t,a,i,e]);const j=e=>{const{name:a,value:i}=e.target;b(e=>(0,n.A)((0,n.A)({},e),{},{[a]:i}))},f=((null===i||void 0===i?void 0:i.role)||"candidate").toLowerCase(),y="head"===f,N="admin"===f,C="candidate"===f;return t?(0,c.jsx)("div",{style:{padding:24},children:"Loading account..."}):(0,c.jsxs)("div",{style:{padding:24,maxWidth:720,margin:"0 auto"},children:[(0,c.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16},children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{style:{margin:0},children:"My Account"}),(0,c.jsx)("div",{style:{color:"#6b7280"},children:"Update your profile information"})]}),(0,c.jsx)("button",{className:"btn btn-outline",onClick:()=>e("/dashboard"),children:"Back"})]}),h&&(0,c.jsx)("div",{className:"alert alert-error",style:{marginBottom:12},children:h}),p&&(0,c.jsx)("div",{className:"alert alert-success",style:{marginBottom:12},children:p}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Name"}),(0,c.jsx)("input",{name:"name",value:x.name,onChange:j,className:"form-input",placeholder:"Your name",type:"text"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Email"}),(0,c.jsx)("input",{name:"email",value:x.email,onChange:j,className:"form-input readonly",type:"email",readOnly:!0,title:"Email can't be changed"})]}),(0,c.jsxs)("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Mobile"}),(0,c.jsx)("input",{name:"mobile",value:x.mobile,onChange:j,className:"form-input",placeholder:"e.g., 9876543210"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Year"}),(0,c.jsx)("input",{name:"year",value:x.year,onChange:j,placeholder:"e.g., 3rd Year"})]})]}),C&&(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Branch"}),(0,c.jsx)("input",{name:"branch",value:x.branch,onChange:j,className:"form-input",placeholder:"e.g., Computer Science, Mechanical Engineering, Electronics"}),(0,c.jsx)("div",{className:"form-help",children:"Your academic branch or specialization"})]}),y&&(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Domain"}),(0,c.jsx)("input",{name:"domain",value:x.domain,onChange:j,className:"form-input readonly",readOnly:!0,title:"Domain is assigned by admin and cannot be changed",placeholder:"e.g., Full Stack, DSA, Frontend"}),(0,c.jsx)("div",{className:"form-help",children:"Your assigned domain (assigned by admin)"})]}),N&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Branch"}),(0,c.jsx)("input",{name:"branch",value:x.branch,onChange:j,className:"form-input",placeholder:"e.g., Computer Science, Mechanical Engineering"}),(0,c.jsx)("div",{className:"form-help",children:"Your academic branch"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Domain"}),(0,c.jsx)("input",{name:"domain",value:x.domain,onChange:j,className:"form-input",placeholder:"e.g., Full Stack, DSA, Frontend"}),(0,c.jsx)("div",{className:"form-help",children:"Your technical domain"})]})]}),(0,c.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:16},children:(0,c.jsx)("button",{className:"btn btn-primary ".concat(m?"btn-loading":""),onClick:async()=>{if(a){u(!0),v(""),g("");try{var e,o,s,d,c,t;const m=(0,l.doc)(r.db,"user",a.uid),u={name:(null===(e=x.name)||void 0===e?void 0:e.trim())||"",email:(null===(o=x.email)||void 0===o?void 0:o.trim())||a.email||"",mobile:(null===(s=x.mobile)||void 0===s?void 0:s.trim())||"",year:(null===(d=x.year)||void 0===d?void 0:d.trim())||"",branch:(null===(c=x.branch)||void 0===c?void 0:c.trim())||"",domain:(null===(t=x.domain)||void 0===t?void 0:t.trim())||"",updatedAt:(0,l.serverTimestamp)()};(await(0,l.getDoc)(m)).exists()?await(0,l.updateDoc)(m,u):await(0,l.setDoc)(m,(0,n.A)({userId:a.uid,role:(null===i||void 0===i?void 0:i.role)||"candidate",blocked:!1,createdAt:(0,l.serverTimestamp)()},u),{merge:!0}),g("Account updated successfully.")}catch(m){console.error("Failed to save account:",m),v(m.message||"Failed to update account.")}finally{u(!1)}}},disabled:m,children:m?"Saving...":"Save Changes"})})]})}}}]);
//# sourceMappingURL=350.f96a11de.chunk.js.map